<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cy.psi.dao.ChangewarehouseDao">

    <resultMap type="com.cy.psi.entity.Inventory" id="InventoryMap">
        <result property="inventoryId" column="inventory_id" jdbcType="VARCHAR"/>
        <result property="depotId" column="depot_id" jdbcType="VARCHAR"/>
        <result property="depotName" column="depot_name" jdbcType="VARCHAR"/>
        <result property="productId" column="product_id" jdbcType="INTEGER"/>
        <result property="productName" column="product_name" jdbcType="VARCHAR"/>
        <result property="purchaseUnitPrice" column="purchase_unit_price" jdbcType="NUMERIC"/>
        <result property="purchaseMoney" column="purchase_money" jdbcType="NUMERIC"/>
        <result property="inventoryQuantity" column="inventory_quantity" jdbcType="INTEGER"/>
        <result property="totalCost" column="total_cost" jdbcType="VARCHAR"/>
        <result property="vendorId" column="vendor_id" jdbcType="INTEGER"/>
        <result property="vendorName" column="vendor_name" jdbcType="VARCHAR"/>
    </resultMap>


    <!--连查询调拨单 -->
    <select id="selectChangewarehouse" resultMap="InventoryMap">
     select * from cypsi.inventory

    </select>
    <!--高级查询-->
    <select id="selectBylikeChangewarehouse" resultMap="InventoryMap">
        select * from cypsi.inventory
        <where>
            <if test="serialNumber!=null || serialNumber!=''">
                and a.serial_number like concat('%',#{serialNumber},'%')
            </if>
            <if test="documentmaker!=null and documentmaker!=''">
                and a.documentMaker like concat('%',#{documentmaker},'%')
            </if>
            <if test="depotName!=null || depotName!=''">
                and b.depot_name like concat('%',#{depotName},'%')
            </if>
        </where>
    </select>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from cypsi.inventory where inventory_id = #{inventoryId}
    </delete>

</mapper>

