<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cy.psi.dao.BaseCustomerDao">

    <resultMap type="com.cy.psi.entity.BaseCustomer" id="BaseCustomerMap">
        <result property="customerId" column="customer_id" jdbcType="INTEGER"/>
        <result property="customerNumber" column="customer_number" jdbcType="VARCHAR"/>
        <result property="customerName" column="customer_name" jdbcType="VARCHAR"/>
        <result property="customerType" column="customer_type" jdbcType="VARCHAR"/>
        <result property="ratio" column="ratio" jdbcType="NUMERIC"/>
        <result property="uId" column="u_id" jdbcType="VARCHAR"/>
        <result property="contact" column="contact" jdbcType="VARCHAR"/>
        <result property="contactAddress" column="contact_address" jdbcType="VARCHAR"/>
        <result property="contactNumber" column="contact_number" jdbcType="VARCHAR"/>
        <result property="remarks" column="remarks" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="BaseCustomerCol">
        customer_id, customer_number, customer_name, customer_type, ratio, u_id, contact, contact_address, contact_number, remarks    </sql>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseCustomerMap">
        select
        <include refid="BaseCustomerCol"></include>
        from cypsi.base_customer
        where customer_id = #{customerId}
    </select>

    <!--查询所有-->
    <select id="queryAll" resultMap="BaseCustomerMap">
        select
        <include refid="BaseCustomerCol"></include>
        from cypsi.base_customer
    </select>

    <!--通过实体作为或者条件查询-->
    <select id="queryOrByPojo" resultMap="BaseCustomerMap">
        select
        <include refid="BaseCustomerCol"></include>
        from cypsi.base_customer
        <where>
            <if test="customerId != null">
                or customer_id like CONCAT('%',#{customerId},'%')
            </if>
            <if test="customerNumber != null and customerNumber != ''">
                or customer_number like CONCAT('%',#{customerNumber},'%')
            </if>
            <if test="customerName != null and customerName != ''">
                or customer_name like CONCAT('%',#{customerName},'%')
            </if>
            <if test="customerType != null and customerType != ''">
                or customer_type like CONCAT('%',#{customerType},'%')
            </if>
            <if test="ratio != null">
                or ratio like CONCAT('%',#{ratio},'%')
            </if>
            <if test="uId != null and uId != ''">
                or u_id like CONCAT('%',#{uId},'%')
            </if>
            <if test="contact != null and contact != ''">
                or contact like CONCAT('%',#{contact},'%')
            </if>
            <if test="contactAddress != null and contactAddress != ''">
                or contact_address like CONCAT('%',#{contactAddress},'%')
            </if>
            <if test="contactNumber != null and contactNumber != ''">
                or contact_number like CONCAT('%',#{contactNumber},'%')
            </if>
            <if test="remarks != null and remarks != ''">
                or remarks like CONCAT('%',#{remarks},'%')
            </if>
        </where>
    </select>

    <!--通过实体作为并且条件查询-->
    <select id="queryAndByPojo" resultMap="BaseCustomerMap">
        select
        <include refid="BaseCustomerCol"></include>
        from cypsi.base_customer
        <where>
            <if test="customerId != null">
                and customer_id = #{customerId}
            </if>
            <if test="customerNumber != null and customerNumber != ''">
                and customer_number = #{customerNumber}
            </if>
            <if test="customerName != null and customerName != ''">
                and customer_name = #{customerName}
            </if>
            <if test="customerType != null and customerType != ''">
                and customer_type = #{customerType}
            </if>
            <if test="ratio != null">
                and ratio = #{ratio}
            </if>
            <if test="uId != null and uId != ''">
                and u_id = #{uId}
            </if>
            <if test="contact != null and contact != ''">
                and contact = #{contact}
            </if>
            <if test="contactAddress != null and contactAddress != ''">
                and contact_address = #{contactAddress}
            </if>
            <if test="contactNumber != null and contactNumber != ''">
                and contact_number = #{contactNumber}
            </if>
            <if test="remarks != null and remarks != ''">
                and remarks = #{remarks}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert">
        insert into cypsi.base_customer
        <trim prefix="(" suffix=")" suffixOverrides=",">

            <if test="customerNumber != null">
                customer_number,
            </if>
            <if test="customerName != null">
                customer_name,
            </if>
            <if test="customerType != null">
                customer_type,
            </if>
            <if test="ratio != null">
                ratio,
            </if>
            <if test="uId != null">
                u_id,
            </if>
            <if test="contact != null">
                contact,
            </if>
            <if test="contactAddress != null">
                contact_address,
            </if>
            <if test="contactNumber != null">
                contact_number,
            </if>
            <if test="remarks != null">
                remarks,
            </if>
        </trim>
        values
        <trim prefix="(" suffix=")" suffixOverrides=",">

            <if test="customerNumber != null">
                #{customerNumber},
            </if>
            <if test="customerName != null">
                #{customerName},
            </if>
            <if test="customerType != null">
                #{customerType},
            </if>
            <if test="ratio != null">
                #{ratio},
            </if>
            <if test="uId != null">
                #{uId},
            </if>
            <if test="contact != null">
                #{contact},
            </if>
            <if test="contactAddress != null">
                #{contactAddress},
            </if>
            <if test="contactNumber != null">
                #{contactNumber},
            </if>
            <if test="remarks != null">
                #{remarks},
            </if>
        </trim>

    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update cypsi.base_customer
        <set>
            <if test="customerNumber != null">
                customer_number = #{customerNumber},
            </if>
            <if test="customerName != null">
                customer_name = #{customerName},
            </if>
            <if test="customerType != null">
                customer_type = #{customerType},
            </if>
            <if test="ratio != null">
                ratio = #{ratio},
            </if>
            <if test="uId != null">
                u_id = #{uId},
            </if>
            <if test="contact != null">
                contact = #{contact},
            </if>
            <if test="contactAddress != null">
                contact_address = #{contactAddress},
            </if>
            <if test="contactNumber != null">
                contact_number = #{contactNumber},
            </if>
            <if test="remarks != null">
                remarks = #{remarks},
            </if>
        </set>
        where customer_id = #{customerId}
    </update>

    <!--通过主键删除数据-->
    <delete id="deleteById">
        delete from cypsi.base_customer where customer_id = #{customerId}
    </delete>

    <!--通过主键列表批量删除数据-->
    <delete id="deleteBatch">
        delete from cypsi.base_customer where customer_id in
        <foreach collection="list" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <!--通过实体列表批量删除数据-->
    <delete id="deleteBatchByEntities">
        delete from cypsi.base_customer where customer_id in
        <foreach collection="list" item="entity" open="(" separator="," close=")">
            #{entity.customerId}
        </foreach>
    </delete>
</mapper>

