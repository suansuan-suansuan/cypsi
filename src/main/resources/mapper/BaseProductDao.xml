<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cy.psi.dao.BaseProductDao">

    <resultMap type="com.cy.psi.entity.BaseProduct" id="BaseProductMap">
        <result property="productId" column="product_id" jdbcType="INTEGER"/>
        <result property="productNumber" column="product_number" jdbcType="VARCHAR"/>
        <result property="productName" column="product_name" jdbcType="VARCHAR"/>
        <result property="unitId" column="unit_id" jdbcType="INTEGER"/>
        <result property="productSpec" column="product_spec" jdbcType="VARCHAR"/>
        <result property="purchaseMoney" column="purchase_money" jdbcType="NUMERIC"/>
        <result property="costPrice" column="cost_price" jdbcType="NUMERIC"/>
        <result property="purchaseUnitPrice" column="purchase_unit_price" jdbcType="NUMERIC"/>
        <result property="remarks" column="remarks" jdbcType="VARCHAR"/>
        <result property="expirationTime" column="expiration_time" jdbcType="TIMESTAMP"/>
        <result property="state" column="state" jdbcType="INTEGER"/>
        <result property="vendorNumber" column="vendor_number" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="BaseProductCol">
        product_id, product_number, product_name, unit_id, product_spec, purchase_money, cost_price, purchase_unit_price, remarks, expiration_time, state, vendor_number    </sql>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseProductMap">
        select
        <include refid="BaseProductCol"></include>
        from cypsi.base_product
        where product_id = #{productId}
    </select>

    <!--查询所有-->
    <select id="queryAll" resultMap="BaseProductMap">
        select
        <include refid="BaseProductCol"></include>
        from cypsi.base_product
    </select>

    <!--通过实体作为或者条件查询-->
    <select id="queryOrByPojo" resultMap="BaseProductMap">
        select
        <include refid="BaseProductCol"></include>
        from cypsi.base_product
        <where>
            <if test="productId != null">
                or product_id like CONCAT('%',#{productId},'%')
            </if>
            <if test="productNumber != null and productNumber != ''">
                or product_number like CONCAT('%',#{productNumber},'%')
            </if>
            <if test="productName != null and productName != ''">
                or product_name like CONCAT('%',#{productName},'%')
            </if>
            <if test="unitId != null">
                or unit_id like CONCAT('%',#{unitId},'%')
            </if>
            <if test="productSpec != null and productSpec != ''">
                or product_spec like CONCAT('%',#{productSpec},'%')
            </if>
            <if test="purchaseMoney != null">
                or purchase_money like CONCAT('%',#{purchaseMoney},'%')
            </if>
            <if test="costPrice != null">
                or cost_price like CONCAT('%',#{costPrice},'%')
            </if>
            <if test="purchaseUnitPrice != null">
                or purchase_unit_price like CONCAT('%',#{purchaseUnitPrice},'%')
            </if>
            <if test="remarks != null and remarks != ''">
                or remarks like CONCAT('%',#{remarks},'%')
            </if>
            <if test="expirationTime != null">
                or expiration_time like CONCAT('%',#{expirationTime},'%')
            </if>
            <if test="state != null">
                or state like CONCAT('%',#{state},'%')
            </if>
            <if test="vendorNumber != null and vendorNumber != ''">
                or vendor_number like CONCAT('%',#{vendorNumber},'%')
            </if>
        </where>
    </select>

    <!--通过实体作为并且条件查询-->
    <select id="queryAndByPojo" resultMap="BaseProductMap">
        select
        <include refid="BaseProductCol"></include>
        from cypsi.base_product
        <where>
            <if test="productId != null">
                and product_id = #{productId}
            </if>
            <if test="productNumber != null and productNumber != ''">
                and product_number = #{productNumber}
            </if>
            <if test="productName != null and productName != ''">
                and product_name = #{productName}
            </if>
            <if test="unitId != null">
                and unit_id = #{unitId}
            </if>
            <if test="productSpec != null and productSpec != ''">
                and product_spec = #{productSpec}
            </if>
            <if test="purchaseMoney != null">
                and purchase_money = #{purchaseMoney}
            </if>
            <if test="costPrice != null">
                and cost_price = #{costPrice}
            </if>
            <if test="purchaseUnitPrice != null">
                and purchase_unit_price = #{purchaseUnitPrice}
            </if>
            <if test="remarks != null and remarks != ''">
                and remarks = #{remarks}
            </if>
            <if test="expirationTime != null">
                and expiration_time = #{expirationTime}
            </if>
            <if test="state != null">
                and state = #{state}
            </if>
            <if test="vendorNumber != null and vendorNumber != ''">
                and vendor_number = #{vendorNumber}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert">
        insert into cypsi.base_product
        <trim prefix="(" suffix=")" suffixOverrides=",">

            <if test="productNumber != null">
                product_number,
            </if>
            <if test="productName != null">
                product_name,
            </if>
            <if test="unitId != null">
                unit_id,
            </if>
            <if test="productSpec != null">
                product_spec,
            </if>
            <if test="purchaseMoney != null">
                purchase_money,
            </if>
            <if test="costPrice != null">
                cost_price,
            </if>
            <if test="purchaseUnitPrice != null">
                purchase_unit_price,
            </if>
            <if test="remarks != null">
                remarks,
            </if>
            <if test="expirationTime != null">
                expiration_time,
            </if>
            <if test="state != null">
                state,
            </if>
            <if test="vendorNumber != null">
                vendor_number,
            </if>
        </trim>
        values
        <trim prefix="(" suffix=")" suffixOverrides=",">

            <if test="productNumber != null">
                #{productNumber},
            </if>
            <if test="productName != null">
                #{productName},
            </if>
            <if test="unitId != null">
                #{unitId},
            </if>
            <if test="productSpec != null">
                #{productSpec},
            </if>
            <if test="purchaseMoney != null">
                #{purchaseMoney},
            </if>
            <if test="costPrice != null">
                #{costPrice},
            </if>
            <if test="purchaseUnitPrice != null">
                #{purchaseUnitPrice},
            </if>
            <if test="remarks != null">
                #{remarks},
            </if>
            <if test="expirationTime != null">
                #{expirationTime},
            </if>
            <if test="state != null">
                #{state},
            </if>
            <if test="vendorNumber != null">
                #{vendorNumber},
            </if>
        </trim>

    </insert>

    <!--批量新增数据 -->
    <insert id="insertBatch">
        <foreach collection="list" item="entity" open="begin" separator=";" close=";end;">
            insert into cypsi.base_product
            <trim prefix="(" suffix=")" suffixOverrides=",">

                <if test="entity.productNumber != null">
                    product_number,
                </if>
                <if test="entity.productName != null">
                    product_name,
                </if>
                <if test="entity.unitId != null">
                    unit_id,
                </if>
                <if test="entity.productSpec != null">
                    product_spec,
                </if>
                <if test="entity.purchaseMoney != null">
                    purchase_money,
                </if>
                <if test="entity.costPrice != null">
                    cost_price,
                </if>
                <if test="entity.purchaseUnitPrice != null">
                    purchase_unit_price,
                </if>
                <if test="entity.remarks != null">
                    remarks,
                </if>
                <if test="entity.expirationTime != null">
                    expiration_time,
                </if>
                <if test="entity.state != null">
                    state,
                </if>
                <if test="entity.vendorNumber != null">
                    vendor_number,
                </if>
            </trim>
            values
            <trim prefix="(" suffix=")" suffixOverrides=",">

                <if test="entity.productNumber != null">
                    #{entity.productNumber},
                </if>
                <if test="entity.productName != null">
                    #{entity.productName},
                </if>
                <if test="entity.unitId != null">
                    #{entity.unitId},
                </if>
                <if test="entity.productSpec != null">
                    #{entity.productSpec},
                </if>
                <if test="entity.purchaseMoney != null">
                    #{entity.purchaseMoney},
                </if>
                <if test="entity.costPrice != null">
                    #{entity.costPrice},
                </if>
                <if test="entity.purchaseUnitPrice != null">
                    #{entity.purchaseUnitPrice},
                </if>
                <if test="entity.remarks != null">
                    #{entity.remarks},
                </if>
                <if test="entity.expirationTime != null">
                    #{entity.expiration_time},
                </if>
                <if test="entity.state != null">
                    #{entity.state},
                </if>
                <if test="entity.vendorNumber != null">
                    #{entity.vendorNumber},
                </if>
            </trim>
        </foreach>
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update cypsi.base_product
        <set>
            <if test="productNumber != null">
                product_number = #{productNumber},
            </if>
            <if test="productName != null">
                product_name = #{productName},
            </if>
            <if test="unitId != null">
                unit_id = #{unitId},
            </if>
            <if test="productSpec != null">
                product_spec = #{productSpec},
            </if>
            <if test="purchaseMoney != null">
                purchase_money = #{purchaseMoney},
            </if>
            <if test="costPrice != null">
                cost_price = #{costPrice},
            </if>
            <if test="purchaseUnitPrice != null">
                purchase_unit_price = #{purchaseUnitPrice},
            </if>
            <if test="remarks != null">
                remarks = #{remarks},
            </if>
            <if test="expirationTime != null">
                expiration_time = #{expirationTime},
            </if>
            <if test="state != null">
                state = #{state},
            </if>
            <if test="vendorNumber != null">
                vendor_number = #{vendorNumber},
            </if>
        </set>
        where product_id = #{productId}
    </update>

    <!--批量修改数据-->
    <update id="updateBatch">
        <foreach collection="list" item="entity" open="begin" separator=";" close=";end;">
            update cypsi.base_product
            <set>
                <if test="entity.productNumber != null">
                    product_number = #{entity.productNumber},
                </if>
                <if test="entity.productName != null">
                    product_name = #{entity.productName},
                </if>
                <if test="entity.unitId != null">
                    unit_id = #{entity.unitId},
                </if>
                <if test="entity.productSpec != null">
                    product_spec = #{entity.productSpec},
                </if>
                <if test="entity.purchaseMoney != null">
                    purchase_money = #{entity.purchaseMoney},
                </if>
                <if test="entity.costPrice != null">
                    cost_price = #{entity.costPrice},
                </if>
                <if test="entity.purchaseUnitPrice != null">
                    purchase_unit_price = #{entity.purchaseUnitPrice},
                </if>
                <if test="entity.remarks != null">
                    remarks = #{entity.remarks},
                </if>
                <if test="entity.expirationTime != null">
                    expiration_time = #{entity.expirationTime},
                </if>
                <if test="entity.state != null">
                    state = #{entity.state},
                </if>
                <if test="entity.vendorNumber != null">
                    vendor_number = #{entity.vendorNumber},
                </if>
            </set>
            where product_id = #{entity.productId}
        </foreach>
    </update>

    <!--通过主键删除数据-->
    <delete id="deleteById">
        delete from cypsi.base_product where product_id = #{productId}
    </delete>

    <!--通过主键列表批量删除数据-->
    <delete id="deleteBatch">
        delete from cypsi.base_product where product_id in
        <foreach collection="list" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <!--通过实体列表批量删除数据-->
    <delete id="deleteBatchByEntities">
        delete from cypsi.base_product where product_id in
        <foreach collection="list" item="entity" open="(" separator="," close=")">
            #{entity.productId}
        </foreach>
    </delete>
</mapper>

